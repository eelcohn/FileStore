set CPUTYPE = `fgrep Hardware /proc/cpuinfo | head -1 | awk '{ print $3 }'`

echo Checking dependencies...
if [ ! -d /usr/include/openssl/ ] || [[ ! $(ldconfig -p | grep libssl) ]]; then
	echo Please install libssl-dev
	exit -1
fi

if [[ ! $(openssl version | grep 1.1.0) ]]; then
	echo OpenSSL version 1.1.0 or above required
#	exit -1
fi

if [ ! -f /usr/include/curses.h ] || [[ ! $(ldconfig -p | grep libncurses) ]]; then
	echo Please install libncurses
	exit -1
fi

if [ ! -f pigpio/pigpio.h ]; then
	echo Downloading pigpio...
	git clone https://github.com/joan2937/pigpio/
fi

if [[ ! $(ldconfig -p | grep pigpio) ]]; then
	echo Compiling pigpio...
	cd pigpio
	make
	cd ..
fi

echo "#define DEBUGBUILD	1"		> config.h
echo "#define REMA1		1"		>> config.h
echo "#define ECONET_ECOIF	\"REMA1\""		>> config.h
echo "#define CPUTYPE		${CPUTYPE}"	>> config.h
echo "#define ECONET_WITHOPENSSL"			>> config.h

